var moa = {    	// activating interface    init: function() {
    		var moa, nav, node, nodes, animation, animations;		moa = document.querySelector(".slide .moa");		nav = moa.querySelector(".moa-nav");		nav.moa = moa;		// handle click on navigation		nav.onclick = function(event) {			if(this.moa.className.match(/select/) && this.moa.className.match(/ moa-ufh| moa-vitamin| moa-xarelto| moa-lmwh| moa-fondaparinux| moa-dti/g)) {				this.moa.className = this.moa.className.replace(" select", "");			}			else if(!this.moa.className.match(/select/)) {				this.moa.className += " select";			}		}		// handle click on nodes		nodes = moa.querySelectorAll(".moa-nav li");		for(var i = 0; node = nodes[i]; i++) {			node.moa = moa;			node.onclick = function(event) {				event.cancelBubble = true;				if(this.moa.className.match(/select/)) {					this.moa.className = this.moa.className.replace(/ moa-ufh| moa-vitamin| moa-xarelto| moa-lmwh| moa-fondaparinux| moa-dti| select| done| play/g, "");					this.moa.className += " "+ this.className;				}				else {					this.moa.className += " select";				}			}		}		animations = moa.querySelectorAll(".moa-ani");		for(var i = 0; animation = animations[i]; i++) {			animation.moa = moa;			animation.onclick = function(event) {				this.moa.moa_zoom = document.body.appendChild(document.createElement("div"));				this.moa.moa_zoom.className = "slide moa-zoom";				this.moa.moa_zoom.moa = this.moa.moa_zoom.appendChild(this.moa.cloneNode(true));				this.moa.moa_zoom.moa.moa_base = this.moa;				// no swiping while in zoom mode				this.moa.moa_zoom.ontouchstart = this.moa.onmousedown = function(event) {					event.cancelBubble = true;				}				// create moa zoom close				this.moa.moa_zoom.close = this.moa.moa_zoom.appendChild(document.createElement("div"));				this.moa.moa_zoom.close.className = "moa-zoom-off";				this.moa.moa_zoom.close.offsetHeight;				this.moa.moa_zoom.close.moa = this.moa.moa_zoom.moa;				this.moa.moa_zoom.close.onclick = function(event) {					event.cancelBubble = true;					// zoom out					this.moa.className = this.moa.className.replace(/ zoom| play| done/g, "")					// remove moa_zoom					this.moa.addEventListener("webkitTransitionEnd", function() {document.body.removeChild(document.querySelector(".moa-zoom"))}, false);				}				// go zoom				this.moa.moa_zoom.moa.className += " zoom";				// set handler for zoomed animations				animations = this.moa.moa_zoom.moa.querySelectorAll(".moa-ani");				for(var i = 0; animation = animations[i]; i++) {					animation.moa = this.moa.moa_zoom.moa;					animation.onclick = function(event) {						if(this.moa.className.match(/play/)) {							this.moa.className = this.moa.className.replace(/ play| done/g, "");						}						else {							this.moa.className = this.moa.className.replace(/ done/g, "");							this.moa.className += " play";						}					}									}				// set handler for nav bg				nav = this.moa.moa_zoom.moa.querySelector(".moa-nav");				nav.moa = this.moa.moa_zoom.moa;				nav.onclick = function(event) {					if(this.moa.className.match(/select/) && this.moa.className.match(/ moa-ufh| moa-vitamin| moa-xarelto| moa-lmwh| moa-fondaparinux| moa-dti/g)) {						this.moa.className = this.moa.className.replace(" select", "");					}					else if(!this.moa.className.match(/select/)) {						this.moa.className += " select";					}				}				// set handler for zoomed nav				nodes = this.moa.moa_zoom.moa.querySelectorAll(".moa-nav li");				for(var i = 0; node = nodes[i]; i++) {					node.moa = this.moa.moa_zoom.moa;					var glows = this.moa.moa_zoom.moa.querySelectorAll("."+node.className+"-glow");					for(var o = 0; glow = glows[o]; o++) {						glow.moa = this.moa.moa_zoom.moa;						if(glow.className.match(/-a/g)) {							glow.addEventListener("webkitAnimationEnd", function() {this.moa.className += " done";}, false);						}					}					node.onclick = function(event) {						event.cancelBubble = true;						if(this.moa.className.match(/select/)) {							this.moa.className = this.moa.className.replace(/ moa-ufh| moa-vitamin| moa-xarelto| moa-lmwh| moa-fondaparinux| moa-dti| select| done| play/g, "");							this.moa.className += " "+ this.className;							this.moa.moa_base.className = this.moa.moa_base.className.replace(/ moa-ufh| moa-vitamin| moa-xarelto| moa-lmwh| moa-fondaparinux| moa-dti| select| done| play/g, "");							this.moa.moa_base.className += " "+ this.className;							var glow = this.moa.querySelector("."+this.className+"-glow");							glow.addEventListener("webkitAnimationEnd", function() {document.querySelector(".moa-zoom .moa").className += " done";}, false);						}						else {							this.moa.className += " select";						}					}				}			}		}    }};//window.addEventListener("load", moa.init, false);moa.init();   